@{
    ViewBag.Title = "MovieReview";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Review</h3>
    </div>
    <div class="panel-body" id="reviewinfo">
        @using (Html.BeginForm())
        {


            <div class="row">
                <div class="col-sm-12">
                    <input type="text" name="mvoieName" id="movieName" class="reviewInput" placeholder="Search Movie Name" />
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <input type="text" name="reviewerName" id="reviewerName" class="reviewInput" placeholder="Reviewer Name" />
                </div>
            </div>

            <div class="row">
                <div class="col-sm-12">
                    <input type="text" name="reviewerRating" id="reviewerRating" class="reviewInput" placeholder="Reviewer Rating" />
                </div>
            </div>


            <div class="row">
                <div class="col-sm-12">
                    <input type="text" name="Review" id="review" class="reviewInput" placeholder="review" />
                </div>
            </div>

            <div class="row">
                <div class="col-sm-12">
                    <input type="text" name="outlink" id="outlink" class="reviewInput" placeholder="Outlink" />
                </div>
            </div>

            <div class="row">
                <div class="col-sm-12">
                    <textarea name="summary" id="summary" class="reviewInput" placeholder="summary"></textarea>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-12">
                    <input type="submit" value="Save" class="btn btn-primary" name="Submit" id="saveReview" />
                </div>
            </div>



            @Html.Hidden("hfReview", "")
        }
    </div>
</div>



<script type="text/javascript">

    $(document).ready(function () {
        $('form').on('submit', function (e) {
            e.preventDefault();
            var x = this;
            reviewDetail();
            x.submit();

        });
    });

    function reviewDetail() {
        var reviewerName = $("#reviewerName").val();

        if (reviewerName == null || reviewerName == "") {
            alert("Reviewer name is required");
            return false;
        }

        var reviewerRating = $("#reviewerRating").val();
        var systemRating = $("#systemRating").val();
        var review = $("#review").val();
        var outlink = $("#outlink").val();
        var hot = $("#hot").val();
        var movieId = $('#movieId :selected').val();

        //creating array of Affilation
        var afName = $("#afName").val().split(",");
        var afLInk = $("#afLInk").val().split(",");
        var afReviewLink = $("#afReviewLink").val().split(",");
        var afLogo = $("#afLogo").val().split(",");

        var affilation = [];

        for (var a = 0; a < afName.length; a++) {
            affilation.push({ "name": afName[a], "link": afLInk[a], "reviewlink": afReviewLink[a], "logoimage": afLogo[a] });
        }

        //creating object of review and inserting data into it

        var review = { "Affiliation": JSON.stringify(affilation), "Hot": hot, "OutLink": outlink, "Review": review, "ReviewerName": reviewerName, "ReviewerRating": reviewerRating, "SystemRating": systemRating, "MovieId": movieId };

        $("#hfReview").val(JSON.stringify(review));
    }
</script>
